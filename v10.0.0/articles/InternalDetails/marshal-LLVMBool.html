<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Marshaling LLVMBool | Ubiquity.NET.Llvm </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Marshaling LLVMBool | Ubiquity.NET.Llvm ">
    <meta name="generator" content="docfx 2.58.5.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc">
    <meta property="docfx:tocrel" content="toc">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../DragonSharp48x48.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                
                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../../api/index.html" title="API Documentation">API Documentation</a>
                      </li>
                      <li>
                          <a href="https://github.com/UbiquityDotNET/Llvm.NET" title="Source Repository">Source Repository</a>
                      </li>
                      <li>
                          <a href="http://LLVM.org" title="LLVM.org">LLVM.org</a>
                      </li>
                      <li>
                          <a href="http://releases.llvm.org/10.0.0/docs/index.html" title="LLVM Docs">LLVM Docs</a>
                      </li>
                </ul>    </div>
          </div>
        </nav>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">LLVM-C API Handles</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="llvm-handles.html" title="Wrapping LLVM-C Handles" class="">Wrapping LLVM-C Handles</a>
                          </li>
                          <li class="">
                            <a href="handleref-interning.html" title="Interning LLVM-C Handles" class="">Interning LLVM-C Handles</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Marshaling LLVM types</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="marshal-string.html" title="Marshaling Strings" class="">Marshaling Strings</a>
                          </li>
                          <li class="active">
                            <a href="marshal-LLVMBool.html" title="Marshaling LLVMBool" class="active">Marshaling LLVMBool</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">LLVMBindingsGenerator</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="LlvmBindingsGenerator-Overview.html" title="Bindings Overview" class="">Bindings Overview</a>
                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="LlvmBindingsGenerator-Configuration.html" title="Configuration" class="">Configuration</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="LlvmBindingsGenerator-YAML-Config-format.html" title="Marshaling Info Table" class="">Marshaling Info Table</a>
                                </li>
                              </ul>  </li>
                        </ul>  </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="marshaling-llvmbool">Marshaling LLVMBool</h1>

<p>LLVMBool is a typdef in the LLVM-C API that is both simple and problematic. In it&#39;s
simplest sense an LLVMBool is a representation of a bi-modal value. However, the
problematic part is that the semantics for the value are different depending on any
given API. That is, in some cases LLVMBool != 0 is a failure case, and others it is
a success! The confusion stems from LLVMBool serving a dual role:</p>
<ol>
<li>A real boolean true/false</li>
<li>A status code where 0 == success and non-zero indicates an error</li>
</ol>
<p>This duality is confusing and can lead to subtle errors in usage of APIs if translated
directly into language projections. This makes hands-off automatic generation of P/Invoke
calls to LLVM either impossible or error prone. Thus, Ubiquity.NET.Llvm uses manually updated P/Invoke
calls that were initially auto generated to get things started but not maintained via any
generation tools. In the case of LLVMBool Ubiquity.NET.Llvm uses distinct types for the different 
semantics and declares the interop signatures with the form appropriate to the function
being called. The two types are LLVMStatus and standard <code>System.Boolean</code> or <code>bool</code> in C#</p>
<h2 id="llvmstatus">LLVMStatus</h2>
<p>This is a status value where 0 == Success and non-zero is a failure or false status.
LLVMStatus is used whenever the 0 == success semantics apply to the API. For example:</p>
<pre><code class="lang-C#">[DllImport( LibraryPath, EntryPoint = &quot;LLVMWriteBitcodeToFD&quot;, CallingConvention = CallingConvention.Cdecl )]
internal static extern LLVMStatus LLVMWriteBitcodeToFD( LLVMModuleRef @M, int @FD, int @ShouldClose, int @Unbuffered );
</code></pre><h2 id="llvmbool">LLVMBool</h2>
<p>This is the traditional boolean value where 0==false and non-zero is true and uses the
standard boolean marshaling support for System.Boolean</p>
<pre><code class="lang-C#">[DllImport( LibraryPath, EntryPoint = &quot;LLVMTypeIsSized&quot;, CallingConvention = CallingConvention.Cdecl )]
[return: MarshalAs( UnmanagedType.Bool )]
internal static extern bool LLVMTypeIsSized( LLVMTypeRef @Ty );
</code></pre></article>
          </div>
          <div class="contribution-panel mobile-hide">
              <a href="https://github.com/UbiquityDotNET/Llvm.NET/blob/develop/docfx/current/articles/InternalDetails/marshal-LLVMBool.md/#L1" title="Improve this Doc" class="fab btn-warning pull-right"><i class="glyphicon glyphicon-pencil"></i></a>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Copyright (C) 2017-2020, Ubiquity.NET Contributors<br><strong>Build:</strong> 10.0.0
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
