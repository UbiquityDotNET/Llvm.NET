<Project>
  <!--
  Since Nuget.config is configured to include the build output location this
  will ensure the folder exists during restore so that it won't fail.
  -->
  <Target Name="CreateBuildOutputNuget" BeforeTargets="Restore;Build;Rebuild">
      <MakeDir Directories="$(MSBuildThisFileDirectory)BuildOutput\NuGet" />
  </Target>

  <Target Name="SetProjectSpecficVersionDependentProperties" AfterTargets="SetVersionDependentProperties">
    <PropertyGroup>
      <LlvmVersion Condition="'$(LlvmVersion)'==''">$(LlvmVersionMajor).$(LlvmVersionMinor).$(LlvmVersionPatch)</LlvmVersion>
      <NuspecProperties Condition="'$(NuspecFile)'!=''" >version=$(PackageVersion);llvmversion=$(LlvmVersion);buildbinoutput=$(BaseOutputPath);configuration=$(Configuration);$(NuspecProperties)</NuspecProperties>
    </PropertyGroup>
  </Target>

  <Target Name="EnsureBuildOutputPaths" BeforeTargets="Build;Restore">
    <MakeDir Directories="$(PackageOutputPath)"/>
  </Target>

  <Target Name="ShowBuildParams" BeforeTargets="Build;Pack">
    <Message Importance="normal" Text="              BuildRootDir: $(BuildRootDir)" />
    <Message Importance="normal" Text="       BaseBuildOutputPath: $(BaseBuildOutputPath)" />
    <Message Importance="normal" Text="BaseIntermediateOutputPath: $(BaseIntermediateOutputPath)" />
    <Message Importance="normal" Text="                    IntDir: $(IntDir)" />
    <Message Importance="normal" Text="            BaseOutputPath: $(BaseOutputPath)" />
    <Message Importance="normal" Text="           FullBuildNumber: $(FullBuildNumber)"/>
    <Message Importance="normal" Text="            PackageVersion: $(PackageVersion)"/>
    <Message Importance="normal" Text="               FileVersion: $(FileVersion)"/>
    <Message Importance="normal" Text="               LlvmVersion: $(LlvmVersion)"/>
  </Target>
</Project>
