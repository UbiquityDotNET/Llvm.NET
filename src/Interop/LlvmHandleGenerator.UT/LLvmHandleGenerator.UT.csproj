<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <!--
    Roslyn Source generators MUST target .NET standard 2.0, which leaves them rather
    limited with respect to newer language and runtime features.
    -->
    <TargetFramework>netstandard2.0</TargetFramework>
    <Nullable>enable</Nullable>
    <!--
        Sadly, Roslyn source generators are restricted to targeting .NET Standard 2.0.
        Most runtime support required is "pollyfilled" with additional dependencies. Though
        some language features have a hard requirement on runtime support not available
        in .NET Standard 2.0. Thus those features will land in build errors in most cases,
        but sometimes can end up as runtime errors! BEWARE! Be careful and limit use of
        esoteric language features.
        -->
    <LangVersion>13</LangVersion>
    <IsPackable>false</IsPackable>
  </PropertyGroup>

  <ItemGroup>
    <Compile Remove="TestProgram.cs" />
  </ItemGroup>

  <ItemGroup>
    <Content Include="TestProgram.cs">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.CodeAnalysis.Common" Version="4.12.0" />
    <PackageReference Include="Microsoft.CodeAnalysis.CSharp" Version="4.12.0" />
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="17.12.0" />
    <PackageReference Include="MSTest.TestAdapter" Version="3.6.4" />
    <PackageReference Include="MSTest.TestFramework" Version="3.6.4" />

    <PackageReference Include="Basic.Reference.Assemblies" Version="1.7.9" PrivateAssets="all" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\LlvmHandleGenerator\LlvmHandleGenerator.csproj" />
    <ProjectReference Include="..\SourceGenerator.Test.Utils\SourceGenerator.Test.Utils.csproj" />
  </ItemGroup>

</Project>
