<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>LlvmBindings Configuration | Llvm.NET </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="LlvmBindings Configuration | Llvm.NET ">
    <meta name="generator" content="docfx 2.48.1.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc">
    <meta property="docfx:tocrel" content="toc">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../DragonSharp48x48.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                
                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../../api/index.html" title="API Documentation">API Documentation</a>
                      </li>
                      <li>
                          <a href="../../articles/index.html" title="Articles">Articles</a>
                      </li>
                      <li>
                          <a href="https://github.com/UbiquityDotNET/Llvm.NET" title="GitHub Repository">GitHub Repository</a>
                      </li>
                      <li>
                          <a href="http://LLVM.org" title="LLVM.org">LLVM.org</a>
                      </li>
                      <li>
                          <a href="http://releases.llvm.org/8.0.0/docs/index.html" title="LLVM Docs">LLVM Docs</a>
                      </li>
                </ul>    </div>
          </div>
        </nav>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">LLVM-C API Handles</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="llvm-handles.html" title="Wrapping LLVM-C Handles" class="">Wrapping LLVM-C Handles</a>
                          </li>
                          <li class="">
                            <a href="handleref-interning.html" title="Interning LLVM-C Handles" class="">Interning LLVM-C Handles</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Marshaling LLVM types</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="marshal-string.html" title="Marshaling Strings" class="">Marshaling Strings</a>
                          </li>
                          <li class="">
                            <a href="marshal-LLVMBool.html" title="Marshaling LLVMBool" class="">Marshaling LLVMBool</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">LLVMBindingsGenerator</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="LlvmBindingsGenerator-Overview.html" title="Bindings Overview" class="">Bindings Overview</a>
                          </li>
                          <li class="active">
                            <span class="expand-stub"></span>
                            <a href="LlvmBindingsGenerator-Configuration.html" title="Configuration" class="active">Configuration</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="LlvmBindingsGenerator-MarshalingInfo-Table.html" title="Marshaling Info Table" class="">Marshaling Info Table</a>
                                </li>
                              </ul>  </li>
                        </ul>  </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="llvmbindings-configuration">LlvmBindings Configuration</h1>

<p>The bindings generator uses a configuration data structure that consists of a
number of tables used by the code generation passes for resolving the various
ambiguities of generating the code. The configuration is an instance of the
<code>LlvmBindingsGenerator.Configuration.GeneratorConfig</code> class.</p>
<p>The GeneratorConfig class holds all the data used by the various passes in
LlvmBindingsGenerator to transform the AST so that subsequent stages will 
generate correct .NET interop code. There are several tables of information
used in the various passes.</p>
<h2 id="statusreturningfunctions">StatusReturningFunctions</h2>
<p>This table is a simple <a class="xref" href="https://msdn.microsoft.com/en-us/library/dd412070(v=vs.110).aspx">SortedSet</a> of
strings. Each entry is the name of an LLVM function that semantically returns a status.
The return type is transformed to an LLVMStatus to differentiate such types from a
boolean or other integral values (in the case of a C Declaration that simply returns an
int as a status value) This helps to keep the interop layer clean, and semantically self
consistent, without actually breaking the ABI of the LLVM-C APIs. </p>
<h2 id="marshalinginfo">MarshalingInfo</h2>
<p>This is a collection of <code>LlvmBindingsGenerator.IMarshalInfo</code> instances
used to transform function parameter and return types as well as add appropriate marshaling
attributes for them. This is the most complex implementations of all the passes. Though
declaring the table is made a lot easier by the various IMarshalInfo implementation types.
(see: <a href="LlvmBindingsGenerator-MarshalingInfo-Table.html">MarshalingInfo Table</a> for details)</p>
<h2 id="deprecatedfunctiontomessagemap">DeprecatedFunctionToMessageMap</h2>
<p>This property consists of a dictionary that maps the name of a deprecated LLVM-C API to
a message explaining what the alternative is, if there is one. This is used to create the
declaration with the Obsolete attribute in .NET. </p>
<div class="NOTE"><h5>Note</h5><p>At present this table is only used to completely filter out the deprecated functions so they
do not even appear in the generated output or EXPORTS.</p>
</div>
<h2 id="internalfunctions">InternalFunctions</h2>
<p>This property contains a dictionary of functions that are considered internal or just completely
ignored for the interop layer. Generally these are the disposal methods that are used in the handle generated handle
types or custom string marshalers. Sometimes they are for functions declared int the headers but
not implemented in the library. (the LTO APIs for instance are not included as they are intended for
use in an actual linker) The values in the dictionary are a boolean that indicates if the function
is just completely ignored (true) or used internally only (false). The MarkFunctionsInternalPass
uses this information to mark the functions appropriately for subsequent passes.</p>
<h2 id="handletotemplatemap">HandleToTemplateMap</h2>
<p>The LlvmBindings generator supports creating safe handles for all of the LLVM object handle types.
Since there are a few distinct patterns for handles the HandleToTemplate map is used to map between
the LLVM-C typedef handle name and the actual template that will generate the code for that
particular handle. The HandleToTemplateMap property is a keyed collection of IHandleCodeTemplate
that is keyed by the HandleName. There are, at present two general template types and one very
specialized template:</p>
<h3 id="globalhandletemplate">GlobalHandleTemplate</h3>
<p>This is used for handles that have a global application defined lifetime and therefore have a
distinct disposal method. The generated handle types derive from the .NET SafeHandle types for
marshaling. The following is a summary of the handle types (for more details see
<a href="llvm-handles.html">Handle Marshaling</a>)</p>
<h4 id="alias-handles">Alias handles</h4>
<p>On occasion there are places where the LLVM-C APIs retrieve a handle to an object that is just
an alias (e.g. not ultimately owned by the caller after the call completes). These are usually,
but not always, child objects returning a reference to the parent. In such cases the application
should never dispose the handle as it doesn&#39;t own it.</p>
<h3 id="contexthandletemplate">ContextHandleTemplate</h3>
<p>Contextual handles are those that are always references to objects owned by a parent container
of some sort. Most objects in LLVM are owned by an LLVM Context or module and only disposed of
when the parent container itself is disposed.</p>
<h3 id="llvmerrorreftemplate">LLVMErrorRefTemplate</h3>
<p>This is a very specialized template to handle the LLVMErrorRef type which actually has multiple
disposal APIs. Just getting the error message out of the handle, actually disposes the handle
underneath, so the interop handle type requires very specialized support.</p>
<h2 id="anonymousenumnames">AnonymousEnumNames</h2>
<p>The AnonymousEnumNames is a dictionary that maps the name of the first enumerated value of an
anonymous enum with the typedef type that is used to represent it. This table is used to
effectively de-anonymize the enum so that a .NET enum with the correct underlying type is
generated.</p>
<h2 id="ignoredheaders">IgnoredHeaders</h2>
<p>This contains a list of header files that the IgnoreSystemHeadersPass uses to mark some of the
LLVM headers as ignored. Such headers will not produce any generated output for .NET.</p>
<h2 id="aliasreturningfunctions">AliasReturningFunctions</h2>
<p>This property contains a list of function names that return a handle, that is, in reality, an
alias that the caller <strong>MUST NOT</strong> destroy/dispose.</p>
</article>
          </div>
          <div class="contribution-panel mobile-hide">
              <a href="https://github.com/UbiquityDotNET/Llvm.NET/blob/master/docfx/articles/InternalDetails/LlvmBindingsGenerator-Configuration.md/#L1" title="Improve this Doc" class="fab btn-warning pull-right"><i class="glyphicon glyphicon-pencil"></i></a>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Copyright (C) 2017-2019, Ubiquity.NET Contributors<br><strong>Build:</strong> 8.0.0-delta.0.0.ci-BLD.482442159
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
