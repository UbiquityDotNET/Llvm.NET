<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Parse Tree Examples | Ubiquity.NET </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Parse Tree Examples | Ubiquity.NET ">
      
      
      <link rel="icon" href="../../../../../../favicon.ico">
      <link rel="stylesheet" href="../../../../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../../../../public/main.css">
      <meta name="docfx:navrel" content="../../../../../../toc.html">
      <meta name="docfx:tocrel" content="../../../../../toc.html">
      
      
      
      
      <meta name="docfx:docurl" content="https://github.com/UbiquityDotNET/Llvm.NET/blob/develop/src/Samples/Kaleidoscope/Kaleidoscope.Grammar/ANTLR/Kaleidoscope-Parsetree-examples.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../../../../index.html">
            <img id="logo" class="svg" src="../../../../../../llvm/DragonSharp48x48.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

        </div>

        <article data-uid="Kaleidoscope-Parsetree-examples">
<h1 id="parse-tree-examples">Parse Tree Examples</h1>

<h2 id="simple-expressions-chapters-34">Simple Expressions (Chapters 3,4)</h2>
<h3 id="basic-operators">Basic operators</h3>
<p><code>1 + 2 * 3 - 4 / 5 ^ 6;</code></p>
<p><img src="parsetree-simpleexp-1.svg" alt="Parse Tree"></p>
<div class="NOTE">
<h5>Note</h5>
<p>The small circle in the upper left corner of the Expression nodes is the precedence value at
the entry to the rule. ANTLR uses a precedence climbing algorithm so this number indicates
the precedence for the expression in relation to others.</p>
</div>
<div class="NOTE">
<h5>Note</h5>
<p>The parse tree for the expression has 5 children that are in evaluation order. That is,
evaluation of the expression starts at the left most child and proceeds across to the right
most child. Since, all binary operations include an operator symbol the evaluation would
consume the children (other than the first one) as an operator and right hand side pair.
this is used in the code generation when processing expression nodes.</p>
</div>
<h3 id="if-else-control-flow">If-Else control flow</h3>
<p>Given the following definition of a recursive function to compute
Fibonacci numbers</p>
<pre><code class="lang-Kaleidoscope">def fib(x)
  if (x &lt; 3) then
    1
  else
    fib(x-1)+fib(x-2);
</code></pre>
<p>The parse tree looks like this:</p>
<p><img src="parsetree-if-else.svg" alt="Parse Tree"></p>
<h3 id="for-loop">For loop</h3>
<p>Given the following kaleidoscope function definition:</p>
<pre><code class="lang-Kaleidoscope">extern putchard(char);
def printstar(n)
  for i = 1, i &lt; n, 1.0 in
    putchard(42)  # ascii 42 = '*'
</code></pre>
<p>The parse tree looks like this:</p>
<p><img src="parsetree-for-loop.svg" alt="Parse Tree"></p>
<h3 id="user-defined-operators">User defined operators</h3>
<p>Given the following operator definitions:</p>
<pre><code class="lang-Kaleidoscope"># Logical unary not.
def unary!(v)
  if v then
    0
  else
    1;

# Define &gt; with the same precedence as &lt;.
def binary&gt; 10 (LHS RHS)
  RHS &lt; LHS;

# Binary &quot;logical or&quot;, (note that it does not &quot;short circuit&quot;)
def binary| 5 (LHS RHS)
  if LHS then
    1
  else if RHS then
    1
  else
    0;

# Define = with slightly lower precedence than relationals.
def binary== 9 (LHS RHS)
  !(LHS &lt; RHS | LHS &gt; RHS);
</code></pre>
<p>The expression <code>2 == 3 | 5 &lt; 4 | !1;</code> generates the following parse tree</p>
<p><img src="parsetree-userops.svg" alt="Parse Tree"></p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/UbiquityDotNET/Llvm.NET/blob/develop/src/Samples/Kaleidoscope/Kaleidoscope.Grammar/ANTLR/Kaleidoscope-Parsetree-examples.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          Copyright (C) 2017-2025, Ubiquity.NET Contributors
          - Build: 20.1.8-delta
        </div>
      </div>
    </footer>
  </body>
</html>
